extends layout

block content

  .formContainor.col.s12.m6.card.blue-grey.darken-1
    .card-content.white-text
      form(action="/polls/" + poll._id + "/vote"  method="post")
        span.card-title #{poll.title}
        p Created by #{poll.author.username}
        - var date = new Date(poll.createdAt).toDateString()
        p #{date}
          span.new.badge(data-badge-caption="Votes") #{poll.totalVotes}
        .input-field.col.s12
          select(name="vote" required)
            option(value="" disabled selected) Choose your option
            each option in poll.options
              option(value=option._id) #{option.description}
          label Options
        .col.s12.form_button
          if poll.userVoted(user)
            button.waves-effect.waves-light.btn.disabled(type="button") Vote
          else
            button.waves-effect.waves-light.btn(type="submit") Vote
        script $(document).ready(function(){$('select').material_select();});
  script(src="https://www.gstatic.com/charts/loader.js")
  script(src="/chart.js")
  .col.s12.m6
    .card.blue-grey.darken-1
      #chart
  a.fixed-action-btn(href="/new")
    button.btn-floating.btn-large.waves-effect.waves-light(style="bottom: 45px; right: 24px")
      i.material-icons add